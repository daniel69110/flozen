{% extends 'base.html.twig' %}

{% block body %}
	<div class="p-6 flex max-md:justify-center mb-20">
		<div class="">
			{% if is_granted('ROLE_ADMIN') == false %}
				<h1 class="text-3xl mb-5 font-semibold">Mon compte</h1>
			{% else %}
				<h1 class="text-3xl mb-5 font-semibold">Mon compte Admin</h1>
			{% endif %}
			<div>
				{% set totalUser = app.session.get('totalUser', 0) %}

				<div class="ml-4 my-2">
					 <p class="text-sm font-medium">Total utilisateurs :</p>
					<p class="text-3xl font-bold">{{ totalUser }}</p>
				</div>

			</div>

			<div class="md:flex">
				<nav class="flex-wrap md:w-52">
					<ul class="divide-y divide-solide">

						{% if is_granted('ROLE_ADMIN') == false %}
							<li class="p-3 hover:bg-slate-300 {% if app.request.get('_route') == 'infos' %} bg-slate-300{% endif %}">
								<a href="{{ path('infos') }}">Interface</a>
							</li>
							<li class="p-3 hover:bg-slate-300 ">
								<a href="">Commandes</a>
							</li>
							<li class="p-3 hover:bg-slate-300 {% if app.request.get('_route') == 'appointment' %} bg-slate-300{% endif %}">
								<a href="{{ path('appointment') }}">Mes rendez-vous</a>
							</li>
							<li class="p-3 hover:bg-slate-300 {% if app.request.get('_route') == 'account' %} bg-slate-300{% endif %}">
								<a href="{{ path('account') }}">Détails du compte</a>
							</li>
							<li class="p-3 hover:bg-slate-300 {% if app.request.get('_route') == 'password' %} bg-slate-300{% endif %}">
								<a href="{{ path('password') }}">Mot de passe</a>
							</li>

						{% else %}
							<li class="p-3 hover:bg-slate-300 {% if app.request.get('_route') == 'infos' %} bg-slate-300{% endif %}">
								<a href="{{ path('infos') }}">Interface</a>
							</li>
							<li class="p-3 hover:bg-slate-300 {% if app.request.get('_route') == 'app_register_admin' %} bg-slate-300{% endif %}">
								<a href="{{ path('app_register_admin') }}">Créer Admin</a>
							</li>
							<li class="p-3 hover:bg-slate-300 {% if app.request.get('_route') == 'availability' %} bg-slate-300{% endif %}">
								<a href="{{ path('availability') }}">Ajouter disponibilité</a>
							</li>
							<li class="p-3 hover:bg-slate-300 {% if app.request.get('_route') == 'availability_list' %} bg-slate-300{% endif %}">
								<a href="{{ path('availability_list') }}">Modifier disponibilité</a>
							</li>
							<li class="p-3 hover:bg-slate-300 {% if app.request.get('_route') == 'admin_reservation' %} bg-slate-300{% endif %}">
								<a href="{{ path('admin_reservation') }}">Réservation</a>
							</li>
							<li class="p-3 hover:bg-slate-300 {% if app.request.get('_route') == 'product' %} bg-slate-300{% endif %}">
								<a href="{{ path('product') }}">Ajouter un produit</a>
							</li>
							<li class="p-3 hover:bg-slate-300 {% if app.request.get('_route') == 'account' %} bg-slate-300{% endif %}">
								<a href="{{ path('account') }}">Détails du compte</a>
							</li>
							<li class="p-3 hover:bg-slate-300 {% if app.request.get('_route') == 'password' %} bg-slate-300{% endif %}">
								<a href="{{ path('password') }}">Mots de passe</a>
							</li>

						{% endif %}
						<li class="p-3 bg-red-500 hover:bg-red-600">
							<a href="{{ path('app_logout') }}">Se deconnecter</a>
						</li>

						<form method="post" action="{{ path('delete_account') }}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer votre compte ?');">
							<input type="hidden" name="_token" value="{{ csrf_token('delete-account') }}">
							<button type="submit" class="text-xs mt-10">Supprimer mon compte</button>
						</form>
					</ul>
				</nav>
				{% block content %}{% endblock %}
				{% block reservation %}{% endblock %}
				{% block register_admin %}{% endblock %}
				{% block availability %}{% endblock %}
				{% block appointment %}{% endblock %}
				{% block availability_list %}{% endblock %}
				{% block password %}{% endblock %}
				{% block product %}{% endblock %}
				{% block infos %}{% endblock %}
			</div>
		</div>
	</div>


{% endblock %}
