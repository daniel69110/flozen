{% extends 'user_interface/base.html.twig' %}

{% block appointment %}

	<table class="min-w-full bg-white border border-gray-300 rounded-lg shadow-md ml-3">
		<thead class="bg-gray-100 sticky top-0 z-10">
			<tr class="border-b">
				<th class="py-4 px-4 text-left text-gray-700 font-semibold">Date de début</th>
				<th class="py-4 px-4 text-left text-gray-700 font-semibold">Date de fin</th>
				<th class="py-4 px-4 text-left text-gray-700 font-semibold">Statut</th>
				<th class="py-4 px-4 text-left text-gray-700 font-semibold">Type</th>
				<th class="py-4 px-4 text-left text-gray-700 font-semibold">Action</th>
			</tr>
		</thead>
		<tbody>
			{% for appointment in appointments %}
				<tr
					class="border-b hover:bg-gray-50">
					<!-- Accéder aux dates via la relation avec Availability -->
					<td class="py-2 px-4">{{ appointment.availability.startDateTime|date('Y-m-d H:i') }}</td>
					<td class="py-2 px-4">{{ appointment.availability.endDateTime|date('Y-m-d H:i') }}</td>
					<td class="py-2 px-4">{{ appointment.status }}</td>
					<td class="py-2 px-4">{{ appointment.availability.booking.name }}</td>
					<td class="py-auto px-4 flex flex-col">
						<form action="{{ path('appointment_delete', { id: appointment.id }) }}" method="post" style="display:inline;">
							<button type="submit" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette réservation ?');" class="text-red-500">Supprimer</button>
						</form>
						<form action="{{ path('appointment_cancel', { id: appointment.id }) }}" method="post" style="display:inline;" class="py-3">
							<button type="submit" onclick="return confirm('Êtes-vous sûr de vouloir annuler cette réservation ?');" class="text-red-500">Annuler mon rendez-vous</button>
						</form>
					</td>
				</tr>
			{% else %}
				<tr>
					<td colspan="5" class="py-4 px-4 text-center text-gray-500">Aucune réservation trouvée</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>


{% endblock %}
